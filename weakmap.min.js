/* (The MIT License)
 *
 * Copyright (c) 2012 Brandon Benvie <http://bbenvie.com>
 */

void function(t,e,n){function r(t,e,n){return"function"==typeof e&&(n=e,e=o(n).replace(/_$/,"")),a(t,e,{configurable:!0,writable:!0,value:n})}function o(t){return"function"!=typeof t?"":"name"in t?t.name:c.call(t).match(p)[1]}function u(t){function e(e,o){return o||2===arguments.length?r.set(e,o):(o=r.get(e),o===n&&(o=t(e),r.set(e,o))),o}var r=new h
return t||(t=v),e}var i=Object.getOwnPropertyNames,a=Object.defineProperty,c=Function.prototype.toString,f=Object.create,l=Object.prototype.hasOwnProperty,p=/^\n?function\s?(\w*)?_?\(/,s=function(){function t(){var t=u(),r={}
this.unlock=function(o){var u=p(o)
if(l.call(u,t))return u[t](r)
var i=f(null,e)
return a(u,t,{value:function(t){return t===r?i:n}}),i}}var e={value:{writable:!0,value:n}},o=f(null),u=function(){var t=Math.random().toString(36).slice(2)
return t in o?u():o[t]=t},c=u(),p=function(t){if(l.call(t,c))return t[c]
if(!Object.isExtensible(t))throw new TypeError("Object must be extensible")
var e=f(null)
return a(t,c,{value:e}),e}
return r(Object,function(t){var e=i(t)
return l.call(t,c)&&e.splice(e.indexOf(c),1),e}),r(t.prototype,function(t){return this.unlock(t).value}),r(t.prototype,function(t,e){this.unlock(t).value=e}),t}(),h=function(u){function i(e){return this===t||null==this||this===i.prototype?new i(e):(v(this,new s),b(this,e),n)}function a(t){h(t)
var r=y(this).get(t)
return r===e?n:r}function c(t,r){h(t),y(this).set(t,r===n?e:r)}function f(t){return h(t),y(this).get(t)!==n}function l(t){h(t)
var e=y(this),r=e.get(t)!==n
return e.set(t,n),r}function p(){return y(this),"[object WeakMap]"}var h=function(t){if(null==t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Invalid WeakMap key")},v=function(t,e){var n=u.unlock(t)
if(n.value)throw new TypeError("Object is already a WeakMap")
n.value=e},y=function(t){var e=u.unlock(t).value
if(!e)throw new TypeError("WeakMap is not generic")
return e},b=function(t,e){null!==e&&"object"==typeof e&&"function"==typeof e.forEach&&e.forEach(function(n,r){n instanceof Array&&2===n.length&&c.call(t,e[r][0],e[r][1])})},d=(""+Object).split("Object"),k=function(){return d[0]+o(this)+d[1]}
r(k,k)
var w={__proto__:[]}instanceof Array?function(t){t.__proto__=k}:function(t){r(t,k)}
return w(i),[p,a,c,f,l].forEach(function(t){r(i.prototype,t),w(t)}),i}(new s),v=Object.create?function(){return Object.create(null)}:function(){return{}}
"WeakMap"in t?"undefined"!=typeof module?module.exports=t.WeakMap:"undefined"!=typeof exports&&(exports.WeakMap=t.WeakMap):"undefined"!=typeof module?module.exports=h:"undefined"!=typeof exports?exports.WeakMap=h:t.WeakMap=h,h.createStorage=u,t.WeakMap&&(t.WeakMap.createStorage=u)}(function(){return this}())
